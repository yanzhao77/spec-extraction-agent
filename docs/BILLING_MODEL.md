# 计费模型：工程规范抽取智能体 API

**版本:** 1.0

---

## 核心原则

本API的计费模型基于**按次成功执行**的原则。我们的目标是提供一个透明、可预测且与价值直接挂钩的计费系统。

**“一次成功的API调用 = 一次可计费的智能体执行”**

---

## 计费单位

- **计费事件:** 每次对 `POST /v1/extract` 端点的**成功调用**。
- **成功定义:** API返回HTTP `200 OK`状态码，并提供一个包含抽取结果的JSON响应。

### 不计费的场景

以下情况**不**构成计费事件：

- **API调用失败:**
  - 认证失败 (401 Unauthorized)
  - 请求格式错误 (400 Bad Request)
  - 服务器内部错误 (5xx Internal Server Error)
- **智能体执行失败:** 如果智能体在执行过程中因内部错误（如无法处理的文档格式、LLM服务中断）而未能生成最终结果，该次调用不计费。
- **调试工具使用:** 访问或使用Gradio调试界面不产生任何费用。

---

## 定价方案

我们提供分层定价，以满足不同规模的需求。

| 方案 | 每月调用次数 | 价格/次 | 每月费用 | 目标用户 |
| :--- | :--- | :--- | :--- | :--- |
| **开发者** | 1,000 | ¥0.50 | ¥500 | 个人开发者、小型项目 |
| **专业版** | 10,000 | ¥0.40 | ¥4,000 | 中小型企业、专业应用 |
| **企业版** | > 50,000 | 定制 | 联系我们 | 大型企业、高用量场景 |

*注：以上价格为示例，实际价格以官方发布为准。*

### 超出部分

- **开发者方案:** 超出部分按 ¥0.60/次 计算。
- **专业版方案:** 超出部分按 ¥0.50/次 计算。

---

## 调用统计与监控

- **API响应头:** 每次成功调用后，API响应头将包含您的账户余量信息。
  - `X-Ratelimit-Limit`: 您所在方案的每月总调用次数。
  - `X-Ratelimit-Remaining`: 本月剩余调用次数。
  - `X-Ratelimit-Reset`: 配额重置的UTC时间戳。

- **开发者后台:** 您可以在您的账户后台查看详细的调用日志、费用报表和余量情况。

---

## 常见问题 (FAQ)

**Q: 如果我上传一个非常大的文档，费用会更高吗？**

A: 不会。当前计费模型不考虑文档大小或处理时长，只基于成功的API调用次数。

**Q: 如果智能体返回的结果是空的（`"validated_items": []`），会计费吗？**

A: 会。只要API调用成功（返回200 OK），就代表智能体已成功执行了其完整的`规划 -> 执行 -> 校验`流程。即使文档中没有符合条件的内容，智能体也消耗了计算资源。

**Q: 我如何控制我的开销？**

A: 您可以通过API响应头实时监控您的余量。此外，您可以在后台设置消费预警和硬性上限，以防止意外超支。

**Q: 是否有免费试用？**

A: 是的，新用户注册后将获得100次免费调用额度，用于测试和集成。
